@page "/detail/{Id}"

@using BlazingFastPublishQueue.Server.Services
@inject ElasticSearchService service

<h1>Id @Id</h1>

@if (transaction is null)
{
    <p>loading...</p>
}
else
{
    <p>@transaction.TransactionId</p>
    <p>@transaction.PublishedItemId</p>
    @foreach (var item in transaction.PublishedItems)
    {
        <p>@item.ItemId</p>
        <p>@item.Title</p>
    }
}

@code {
    [Parameter]
    public string Id { get; set; }

    private PublishTransaction transaction;

    protected override async Task OnInitializedAsync()
    {
        transaction = await service.GetTransaction(Id);
    }
}
